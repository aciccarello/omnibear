import{c as k,_ as P}from"./assets/browser.b81c6ce4.js";import{c as D}from"./assets/url.03c87426.js";var O={exports:{}};(function(c,h){(function(r,m){c.exports=m()})(k,function(){var r={};r.version="2.0.2",r.livingStandard="2016-05-25T09:22:18Z",r.Parser=function(){this.rootPrefix="h-",this.propertyPrefixes=["p-","dt-","u-","e-"],this.excludeTags=["br","hr"]},r.maps=r.maps?r.maps:{},r.rels=r.rels?r.rels:{},r.Parser.prototype={init:function(){this.rootNode=null,this.document=null,this.options={baseUrl:"",filters:[],textFormat:"whitespacetrimmed",dateFormat:"auto",overlappingVersions:!1,impliedPropertiesByVersion:!0,parseLatLonGeo:!1,lang:!1},this.rootID=0,this.errors=[],this.noContentErr="No options.node or options.html was provided and no document object could be found."},get:function(t){var e=this.formatEmpty(),i=[],s;if(this.init(),t=t||{},this.mergeOptions(t),this.getDOMContext(t),!this.rootNode||!this.document)this.errors.push(this.noContentErr);else{if(this.hasMicroformats(this.rootNode,t)){if(this.prepareDOM(t),this.options.filters.length>0){var n=this.findFilterNodes(this.rootNode,this.options.filters);i=this.walkRoot(n)}else i=this.walkRoot(this.rootNode);e.items=i,r.domUtils.canCloneDocument(this.document)===!1&&this.clearUpDom(this.rootNode)}this.findRels&&(s=this.findRels(this.rootNode),e.rels=s.rels,e["rel-urls"]=s["rel-urls"])}return this.errors.length>0?this.formatError():e},getParent:function(t,e){return this.init(),e=e||{},t?this.getParentTreeWalk(t,e):(this.errors.push(this.noContentErr),this.formatError())},count:function(t){var e={},i,s,n,o;if(this.init(),t=t||{},this.getDOMContext(t),!this.rootNode||!this.document)return{errors:[this.noContentErr]};for(i=this.findRootNodes(this.rootNode,!0),o=i.length;o--;)for(s=r.domUtils.getAttributeList(i[o],"class"),n=s.length;n--;){r.utils.startWith(s[n],"h-")&&this.appendCount(s[n],1,e);for(var a in r.maps)r.maps[a].root===s[n]&&s.indexOf(a)===-1&&this.appendCount(a,1,e)}var l=this.countRels(this.rootNode);return l>0&&(e.rels=l),e},isMicroformat:function(t,e){var i,s;if(!t)return!1;if(t=r.domUtils.getTopMostNode(t),i=this.getUfClassNames(t),e&&e.filters&&r.utils.isArray(e.filters)){for(s=e.filters.length;s--;)if(i.root.indexOf(e.filters[s])>-1)return!0;return!1}else return i.root.length>0},hasMicroformats:function(t,e){var i,s;if(!t)return!1;if(t=r.domUtils.getTopMostNode(t),i=this.findRootNodes(t,!0),e&&e.filters&&r.utils.isArray(e.filters)){for(s=i.length;s--;)if(this.isMicroformat(i[s],e))return!0;return!1}else return i.length>0},add:function(t){t.forEach(function(e){e&&e.root&&e.name&&e.properties&&(r.maps[e.name]=JSON.parse(JSON.stringify(e)))})},getParentTreeWalk:function(t,e,i){return e=e||{},i===void 0?t.parentNode&&t.nodeName!=="HTML"?this.getParentTreeWalk(t.parentNode,e,!0):this.formatEmpty():t!=null&&t.parentNode?this.isMicroformat(t,e)?(e.node=t,this.get(e)):this.getParentTreeWalk(t.parentNode,e,!0):this.formatEmpty()},getDOMContext:function(t){var e=r.domUtils.getDOMContext(t);this.rootNode=e.rootNode,this.document=e.document},prepareDOM:function(t){var e,i;try{!t.baseUrl&&this.document&&this.document.location&&(this.options.baseUrl=this.document.location.href)}catch{}e=r.domUtils.querySelector(this.document,"base"),e&&(i=r.domUtils.getAttribute(e,"href"),i&&(this.options.baseUrl=i));var s,n,o;return s=r.domUtils.getNodePath(this.rootNode),n=r.domUtils.cloneDocument(this.document),o=r.domUtils.getNodeByPath(n,s),n&&o&&(this.document=n,this.rootNode=o),this.addIncludes&&this.addIncludes(this.document),this.rootNode&&this.document},formatError:function(){var t=this.formatEmpty();return t.errors=this.errors,t},formatEmpty:function(){return{items:[],rels:{},"rel-urls":{}}},findFilterNodes:function(t,e){r.utils.isString(e)&&(e=[e]);var i=r.domUtils.createNode("div"),s=this.findRootNodes(t,!0),n=0,o=0,a=0;for(a=e.length;a--;)if(this.getMapping(e[a])){var l=this.getMapping(e[a]).root;e.push(l)}if(s)for(n=s.length;o<n;){for(a=e.length;a--;)if(r.domUtils.hasAttributeValue(s[o],"class",e[a])){var u=r.domUtils.clone(s[o]);r.domUtils.appendChild(i,u);break}o++}return i},appendCount:function(t,e,i){i[t]?i[t]=i[t]+e:i[t]=e},shouldInclude:function(t,e){var i;if(r.utils.isArray(e)&&e.length>0){for(i=e.length;i--;)if(t.type[0]===e[i])return!0;return!1}else return!0},findRootNodes:function(t,e){var i=null,s=[],n=[],o,a,l,u,f;for(f in r.maps)r.maps.hasOwnProperty(f)&&n.push(r.maps[f].root);for(e=e||!1,e&&t.parentNode?i=r.domUtils.getNodesByAttribute(t.parentNode,"class"):i=r.domUtils.getNodesByAttribute(t,"class"),a=0,l=i.length;a<l;){for(o=r.domUtils.getAttributeList(i[a],"class"),u=o.length;u--;){if(n.indexOf(o[u])>-1){s.push(i[a]);break}if(r.utils.startWith(o[u],"h-")){s.push(i[a]);break}}a++}return s},walkRoot:function(t){var e=this,i=[],s,n,o=[],a=[];if(n=this.getUfClassNames(t),n&&n.root.length>0)o=this.walkTree(t),o.length>0&&(a=a.concat(o));else if(i=r.domUtils.getChildren(t),i&&i.length>0&&this.findRootNodes(t,!0).length>-1)for(var l=0;l<i.length;l++)s=i[l],o=e.walkRoot(s),o.length>0&&(a=a.concat(o));return a},walkTree:function(t){var e,i=[],s,n;if(e=this.getUfClassNames(t),e&&e.root.length&&e.root.length>0){if(this.rootID++,n=this.rootID,s=this.createUfObject(e.root,e.typeVersion),this.walkChildren(t,s,e.root,n,e),this.impliedRules&&this.impliedRules(t,s,e),this.options.lang===!0){var o=r.domUtils.getFirstAncestorAttribute(t,"lang");o&&(s.lang=o)}i.push(this.cleanUfObject(s))}return i},walkChildren:function(t,e,i,s,n){var o=this,a=[],l,u,f,d,A,v,g,w,U,y;for(a=r.domUtils.getChildren(t),w=0,U=a.length;w<U;){y=a[w];var p=o.getUfClassNames(y,i);if(p.root.length>0&&p.properties.length>0&&!y.addedAsRoot){for(l=o.createUfObject(p.root,p.typeVersion,r.text.parse(this.document,y,o.options.textFormat)),d=o.removePropPrefix(p.properties[0][0]),n&&n.root.length===1&&n.properties.length===1&&o.impliedValueRule&&(e=o.impliedValueRule(e,n.properties[0][0],p.properties[0][0],f)),e.properties[d]?e.properties[d].push(l):e.properties[d]=[l],o.rootID++,y.addedAsRoot=!0,g=0,v=l.type.length,u=o.rootID;g<v;)o.walkChildren(y,l,l.type,u,p),g++;this.impliedRules&&o.impliedRules(y,l,p),this.cleanUfObject(l)}if(p.root.length===0&&p.properties.length>0){for(g=0,v=p.properties.length;g<v;)f=o.getValue(y,p.properties[g][0],e),d=o.removePropPrefix(p.properties[g][0]),A=p.properties[g][1],n&&n.root.length===1&&n.properties.length===1&&o.impliedValueRule&&(e=o.impliedValueRule(e,n.properties[0][0],p.properties[g][0],f)),o.hasRootID(y,s,d)||o.isAllowedPropertyVersion(e.typeVersion,A)&&(e.properties[d]?e.properties[d].push(f):e.properties[d]=[f],o.appendRootID(y,s,d)),g++;o.walkChildren(y,e,i,s,p)}if(p.root.length===0&&p.properties.length===0&&o.walkChildren(y,e,i,s,p),p.root.length>0&&p.properties.length===0){for(l=o.createUfObject(p.root,p.typeVersion,r.text.parse(this.document,y,o.options.textFormat)),e.children||(e.children=[]),o.hasRootID(y,s,"child-root")||(e.children.push(l),o.appendRootID(y,s,"child-root"),o.rootID++),g=0,v=l.type.length,u=o.rootID;g<v;)o.walkChildren(y,l,l.type,u,p),g++;this.impliedRules&&o.impliedRules(y,l,p),o.cleanUfObject(l)}w++}},getValue:function(t,e,i){var s="";return r.utils.startWith(e,"p-")&&(s=this.getPValue(t,!0)),r.utils.startWith(e,"e-")&&(s=this.getEValue(t)),r.utils.startWith(e,"u-")&&(s=this.getUValue(t,!0)),r.utils.startWith(e,"dt-")&&(s=this.getDTValue(t,e,i,!0)),s},getPValue:function(t,e){var i="";return e&&(i=this.getValueClass(t,"p")),!i&&e&&(i=this.getValueTitle(t)),i||(i=r.domUtils.getAttrValFromTagList(t,["abbr"],"title")),i||(i=r.domUtils.getAttrValFromTagList(t,["data","input"],"value")),(t.name==="br"||t.name==="hr")&&(i=""),i||(i=r.domUtils.getAttrValFromTagList(t,["img","area"],"alt")),i||(i=r.text.parse(this.document,t,this.options.textFormat)),i||""},getEValue:function(t){var e={value:"",html:""};if(this.expandURLs(t,"src",this.options.baseUrl),this.expandURLs(t,"href",this.options.baseUrl),e.value=r.text.parse(this.document,t,this.options.textFormat),e.html=r.html.parse(t),this.options.lang===!0){var i=r.domUtils.getFirstAncestorAttribute(t,"lang");i&&(e.lang=i)}return e},getUValue:function(t,e){var i="";return e&&(i=this.getValueClass(t,"u")),!i&&e&&(i=this.getValueTitle(t)),i||(i=r.domUtils.getAttrValFromTagList(t,["a","area"],"href")),i||(i=r.domUtils.getAttrValFromTagList(t,["img","audio","video","source"],"src")),i||(i=r.domUtils.getAttrValFromTagList(t,["video"],"poster")),i||(i=r.domUtils.getAttrValFromTagList(t,["object"],"data")),i&&i!==""&&i.indexOf("://")===-1&&(i=r.url.resolve(i,this.options.baseUrl)),i||(i=r.domUtils.getAttrValFromTagList(t,["abbr"],"title")),i||(i=r.domUtils.getAttrValFromTagList(t,["data","input"],"value")),i||(i=r.text.parse(this.document,t,this.options.textFormat)),i||""},getDTValue:function(t,e,i,s){var n="",o=!1;if(s&&(n=this.getValueClass(t,"dt"),n&&(o=!0)),!n&&s&&(n=this.getValueTitle(t)),n||(n=r.domUtils.getAttrValFromTagList(t,["time","ins","del"],"datetime")),n||(n=r.domUtils.getAttrValFromTagList(t,["abbr"],"title")),n||(n=r.domUtils.getAttrValFromTagList(t,["data","input"],"value")),n||(n=r.text.parse(this.document,t,this.options.textFormat)),n){var a=o?"microformat2":this.options.dateFormat;return r.dates.isDuration(n)?n:r.dates.isTime(n)?(i&&i.times.push([e,r.dates.parseAmPmTime(n,a)]),r.dates.parseAmPmTime(n,a)):(i&&i.dates.push([e,new r.ISODate(n).toString(a)]),new r.ISODate(n).toString(a))}else return""},appendRootID:function(t,e,i){if(this.hasRootID(t,e,i)===!1){var s=[];r.domUtils.hasAttribute(t,"rootids")&&(s=r.domUtils.getAttributeList(t,"rootids")),s.push("id"+e+"-"+i),r.domUtils.setAttribute(t,"rootids",s.join(" "))}},hasRootID:function(t,e,i){var s=[];return r.domUtils.hasAttribute(t,"rootids")?(s=r.domUtils.getAttributeList(t,"rootids"),s.indexOf("id"+e+"-"+i)>-1):!1},getValueClass:function(t,e){var i=this,s=[],n=[],o,a,l;for(s=r.domUtils.getChildren(t),a=0,l=s.length;a<l;){o=s[a];var u=null;if(r.domUtils.hasAttributeValue(o,"class","value")){switch(e){case"p":u=i.getPValue(o,!1);break;case"u":u=i.getUValue(o,!1);break;case"dt":u=i.getDTValue(o,"",null,!1);break}u&&n.push(r.utils.trim(u))}a++}if(n.length>0){if(e==="p")return r.text.parseText(this.document,n.join(""),this.options.textFormat);if(e==="u")return n.join("");if(e==="dt"){var f="microformat2";return r.dates.concatFragments(n,f).toString(f)}}else return null},getValueTitle:function(t){var e=[],i,s,n;for(i=r.domUtils.getNodesByAttributeValue(t,"class","value-title"),n=0,s=i.length;n<s;)r.domUtils.hasAttribute(i[n],"title")&&e.push(r.domUtils.getAttribute(i[n],"title")),n++;return e.join("")},hasHClass:function(t){var e=this.getUfClassNames(t);return!!(e.root&&e.root.length>0)},getUfClassNames:function(t,e){var i=this,s={root:[],properties:[]},n,o,a,l,u,f,d,A,v,g,w,U,y,p;if(r.domUtils.hasTagName(t,this.excludeTags)===!1&&(n=r.domUtils.getAttribute(t,"class"),n))for(a=n.split(" "),f=0,u=a.length;f<u;){for(l=r.utils.trim(a[f]),r.utils.startWith(l,i.rootPrefix)&&r.utils.isLowerCase(l)&&(s.root.indexOf(l)===-1&&s.root.push(l),s.typeVersion="v2"),d=i.propertyPrefixes.length;d--;)r.utils.startWith(l,i.propertyPrefixes[d])&&r.utils.isLowerCase(l)&&s.properties.push([l,"v2"]);for(o in r.maps)r.maps.hasOwnProperty(o)&&r.maps[o].root===l&&s.root.indexOf(o)===-1&&(r.maps[o].subTree?s.properties.push(["p-"+r.maps[o].root,"v1"]):(s.root.push(o),s.typeVersion||(s.typeVersion="v1")));if(e){for(var N=0;N<e.length;N++)if(p=e[N],v=i.getMapping(p),v){for(o in v.properties)if(v.properties.hasOwnProperty(o)&&(g=v.properties[o],w=g.map?g.map:"p-"+o,o===l))if(g.uf){for(A=0;A<u;)U=i.getV2RootName(a[A]),g.uf.indexOf(U)>-1&&s.root.indexOf(U)===-1&&(s.root.push(U),s.typeVersion="v1"),A++;s.properties.indexOf(w)===-1&&s.properties.push([w,"v1"])}else s.properties.indexOf(w)===-1&&s.properties.push([w,"v1"])}}f++}if(e&&this.findRelImpied)for(var x=0;x<e.length;x++)p=e[x],y=this.findRelImpied(t,p),y&&s.properties.indexOf(y)===-1&&s.properties.push([y,"v1"]);return s},getMapping:function(t){var e;for(e in r.maps)if(r.maps[e].root===t||e===t)return r.maps[e];return null},getV2RootName:function(t){var e;for(e in r.maps)if(r.maps[e].root===t)return e;return null},isAllowedPropertyVersion:function(t,e){return this.options.overlappingVersions===!0?!0:t===e},createUfObject:function(t,e,i){var s={};return i&&r.utils.isOnlyWhiteSpace(i)===!1&&(s.value=i),r.utils.isArray(t)?s.type=t:s.type=[t],s.properties={},s.typeVersion=e,s.times=[],s.dates=[],s.altValue=null,s},cleanUfObject:function(t){return delete t.times,delete t.dates,delete t.typeVersion,delete t.altValue,t},removePropPrefix:function(t){var e;for(e=this.propertyPrefixes.length;e--;){var i=this.propertyPrefixes[e];r.utils.startWith(t,i)&&r.utils.isLowerCase(t)&&(t=t.substr(i.length))}return t},expandURLs:function(t,e,i){var s,n,o;for(n=r.domUtils.getNodesByAttribute(t,e),s=n.length;s--;)try{o=r.domUtils.getAttribute(n[s],e),o&&o!==""&&i!==""&&o.indexOf("://")===-1&&(o=r.url.resolve(o,i),r.domUtils.setAttribute(n[s],e,o))}catch{}},mergeOptions:function(t){var e;for(e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e])},removeRootIds:function(t){var e,i;for(e=r.domUtils.getNodesByAttribute(t,"rootids"),i=e.length;i--;)r.domUtils.removeAttribute(e[i],"rootids")},clearUpDom:function(t){this.removeIncludes&&this.removeIncludes(t),this.removeRootIds(t)}},r.Parser.prototype.constructor=r.Parser,r.Parser&&(r.Parser.prototype.impliedRules=function(t,e,i){var s=e.typeVersion?e.typeVersion:"v2";return this.options.impliedPropertiesByVersion===!1&&(s="v2"),t&&e&&e.properties&&(e=this.impliedBackwardComp(t,e,i),s==="v2"&&(e=this.impliedhFeedTitle(e),e=this.impliedName(t,e),e=this.impliedPhoto(t,e),e=this.impliedUrl(t,e)),e=this.impliedValue(t,e,i),e=this.impliedDate(e),this.options.parseLatLonGeo===!0&&(e=this.impliedGeo(e))),e},r.Parser.prototype.impliedName=function(t,e){var i,s;if(!e.properties.name){s=this.getImpliedProperty(t,["img","area","abbr"],this.getNameAttr);var n=this.options.textFormat;s?i=[r.text.parseText(this.document,s,n)]:i=[r.text.parse(this.document,t,n)],i&&i[0]!==""&&(e.properties.name=i)}return e},r.Parser.prototype.impliedPhoto=function(t,e){var i;return e.properties.photo||(i=this.getImpliedProperty(t,["img","object"],this.getPhotoAttr),i&&(i&&i!==""&&this.options.baseUrl!==""&&i.indexOf("://")===-1&&(i=r.url.resolve(i,this.options.baseUrl)),e.properties.photo=[r.utils.trim(i)])),e},r.Parser.prototype.impliedUrl=function(t,e){var i;return e.properties.url||(i=this.getImpliedProperty(t,["a","area"],this.getURLAttr),i&&(i&&i!==""&&this.options.baseUrl!==""&&i.indexOf("://")===-1&&(i=r.url.resolve(i,this.options.baseUrl)),e.properties.url=[r.utils.trim(i)])),e},r.Parser.prototype.impliedDate=function(t){var e;if(t.times.length>0&&t.dates.length>0){e=r.dates.dateTimeUnion(t.dates[0][1],t.times[0][1],"microformat2");var i=this.removePropPrefix(t.times[0][0]);!!i.length&&Array.isArray(t.properties[i])&&(t.properties[i][0]=e.toString("microformat2"))}return delete t.times,delete t.dates,t},r.Parser.prototype.getImpliedProperty=function(t,e,i){var s=i(t),n,o;return s||(n=r.domUtils.getSingleDescendantOfType(t,e),n&&this.hasHClass(n)===!1&&(s=i(n)),t.children.length>0&&(o=r.domUtils.getSingleDescendant(t),o&&this.hasHClass(o)===!1&&(n=r.domUtils.getSingleDescendantOfType(o,e),n&&this.hasHClass(n)===!1&&(s=i(n))))),s},r.Parser.prototype.getNameAttr=function(t){var e=r.domUtils.getAttrValFromTagList(t,["img","area"],"alt");return e||(e=r.domUtils.getAttrValFromTagList(t,["abbr"],"title")),e},r.Parser.prototype.getPhotoAttr=function(t){var e=r.domUtils.getAttrValFromTagList(t,["img"],"src");return!e&&r.domUtils.hasAttributeValue(t,"class","include")===!1&&(e=r.domUtils.getAttrValFromTagList(t,["object"],"data")),e},r.Parser.prototype.getURLAttr=function(t){var e=null;return r.domUtils.hasAttributeValue(t,"class","include")===!1&&(e=r.domUtils.getAttrValFromTagList(t,["a"],"href"),e||(e=r.domUtils.getAttrValFromTagList(t,["area"],"href"))),e},r.Parser.prototype.impliedValue=function(t,e,i){return e.properties.name&&e.value&&i.root.length>0&&i.properties.length===1&&(e=this.getAltValue(e,i.properties[0][0],"p-name",e.properties.name[0])),e.properties.url&&i&&i.root.length===1&&i.properties.length===1&&(e=this.getAltValue(e,i.properties[0][0],"u-url",e.properties.url[0])),e.altValue!==null&&(e.value=e.altValue.value),delete e.altValue,e},r.Parser.prototype.getAltValue=function(t,e,i,s){return t.value&&!t.altValue&&(r.utils.startWith(e,"p-")&&i==="p-name"&&(t.altValue={name:i,value:s}),r.utils.startWith(e,"e-")&&r.utils.startWith(i,"e-")&&(t.altValue={name:i,value:s}),r.utils.startWith(e,"u-")&&i==="u-url"&&(t.altValue={name:i,value:s})),t},r.Parser.prototype.impliedhFeedTitle=function(t){if(t.type&&t.type.indexOf("h-feed")>-1&&(t.properties.name===void 0||t.properties.name[0]==="")){var e=r.domUtils.querySelector(this.document,"title");e&&(t.properties.name=[r.domUtils.textContent(e)])}return t},r.Parser.prototype.impliedGeo=function(t){var e,i,s,n,o=!0;return t.type&&t.type.indexOf("h-geo")>-1&&(t.properties.latitude===void 0||t.properties.longitude===void 0)&&(e=t.properties.name?t.properties.name[0]:null,e=!e&&t.properties.value?t.properties.value:e,e&&(e=e.replace(";",","),e.indexOf(",")>-1&&(i=e.split(","),i.length>1&&(n=parseFloat(i[0]),(r.utils.isNumber(n)&&n>90||n<-90)&&(o=!1),s=parseFloat(i[1]),(r.utils.isNumber(s)&&s>180||s<-180)&&(o=!1),o&&(t.properties.latitude=[n],t.properties.longitude=[s]))))),t},r.Parser.prototype.impliedBackwardComp=function(t,e,i){return i.root.length===1&&i.properties.length===1&&i.root[0].replace("h-","")===this.removePropPrefix(i.properties[0][0])&&r.utils.hasProperties(e.properties)===!1&&(e=this.impliedName(t,e)),e}),r.Parser&&(r.Parser.prototype.addIncludes=function(t){this.addAttributeIncludes(t,"itemref"),this.addAttributeIncludes(t,"headers"),this.addClassIncludes(t)},r.Parser.prototype.addAttributeIncludes=function(t,e){var i,s,n,o,a,l;for(i=r.domUtils.getNodesByAttribute(t,e),o=0,n=i.length;o<n;){if(s=r.domUtils.getAttributeList(i[o],e),s)for(a=0,l=s.length;a<l;)this.apppendInclude(i[o],s[a]),a++;o++}},r.Parser.prototype.addClassIncludes=function(t){var e,i,s=0,n;for(i=r.domUtils.getNodesByAttributeValue(t,"class","include"),n=i.length;s<n;)e=r.domUtils.getAttrValFromTagList(i[s],["a"],"href"),e||(e=r.domUtils.getAttrValFromTagList(i[s],["object"],"data")),this.apppendInclude(i[s],e),s++},r.Parser.prototype.apppendInclude=function(t,e){var i,s;e&&(e=r.utils.trim(e.replace("#","")),i=r.domUtils.getElementById(this.document,e),i&&(s=r.domUtils.clone(i),this.markIncludeChildren(s),r.domUtils.appendChild(t,s)))},r.Parser.prototype.markIncludeChildren=function(t){var e,i,s;for(e=this.findRootNodes(t),i=0,s=e.length,r.domUtils.setAttribute(t,"data-include","true"),r.domUtils.setAttribute(t,"style","display:none");i<s;)r.domUtils.setAttribute(e[i],"data-include","true"),i++},r.Parser.prototype.removeIncludes=function(t){var e,i;for(e=r.domUtils.getNodesByAttribute(t,"data-include"),i=e.length;i--;)r.domUtils.removeChild(t,e[i])}),r.Parser&&(r.Parser.prototype.findRels=function(t){var e={items:[],rels:{},"rel-urls":{}},i,s,n,o,a,l,u,f,d;for(d=r.domUtils.getNodesByAttribute(t,"rel"),i=0,s=d.length;i<s;){if(a=r.domUtils.getAttribute(d[i],"rel"),a){for(l=a.split(" "),o=0,n=l.length;o<n;){if(u=r.utils.trim(l[o]),f=r.domUtils.getAttrValFromTagList(d[i],["a","area"],"href"),f||(f=r.domUtils.getAttrValFromTagList(d[i],["link"],"href")),e.rels[u]||(e.rels[u]=[]),typeof this.options.baseUrl=="string"&&typeof f=="string"){var A=r.url.resolve(f,this.options.baseUrl);e.rels[u].indexOf(A)===-1&&e.rels[u].push(A)}o++}var v=null;r.domUtils.hasAttribute(d[i],"href")&&(v=r.domUtils.getAttribute(d[i],"href"),v&&(v=r.url.resolve(v,this.options.baseUrl)));var g=this.getRelProperties(d[i]);g.rels=l,v&&e["rel-urls"][v]===void 0&&(e["rel-urls"][v]=g)}i++}return e},r.Parser.prototype.getRelProperties=function(t){var e={};return r.domUtils.hasAttribute(t,"media")&&(e.media=r.domUtils.getAttribute(t,"media")),r.domUtils.hasAttribute(t,"type")&&(e.type=r.domUtils.getAttribute(t,"type")),r.domUtils.hasAttribute(t,"hreflang")&&(e.hreflang=r.domUtils.getAttribute(t,"hreflang")),r.domUtils.hasAttribute(t,"title")&&(e.title=r.domUtils.getAttribute(t,"title")),r.utils.trim(this.getPValue(t,!1))!==""&&(e.text=this.getPValue(t,!1)),e},r.Parser.prototype.findRelImpied=function(t,e){var i,s,n;if(s=this.getMapping(e),s){for(var o in s.properties)if(s.properties.hasOwnProperty(o)){var a=s.properties[o],l=a.map?a.map:"p-"+o,u=0;if(a.relAlt&&r.domUtils.hasAttribute(t,"rel")){for(n=a.relAlt.length;n--;)r.domUtils.hasAttributeValue(t,"rel",a.relAlt[n])&&u++;u===a.relAlt.length&&(i=l)}}}return i},r.Parser.prototype.hasRel=function(t){return this.countRels(t)>0},r.Parser.prototype.countRels=function(t){return t?r.domUtils.getNodesByAttribute(t,"rel").length:0}),r.utils={isString:function(t){return typeof t=="string"},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},isArray:function(t){return t&&!t.propertyIsEnumerable("length")&&typeof t=="object"&&typeof t.length=="number"},isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},startWith:function(t,e){return t.indexOf(e)===0},isLowerCase:function(t){return t===t.toLowerCase()},trim:function(t){return t&&this.isString(t)?t.trim()?t.trim():t.replace(/^\s+|\s+$/g,""):""},replaceCharAt:function(t,e,i){return t&&t.length>e?t.substr(0,e)+i+t.substr(e+i.length):t},trimWhitespace:function(t){if(t&&t.length){for(var e=t.length,i=0;e--&&this.isOnlyWhiteSpace(t[e]);)t=this.replaceCharAt(t,e," ");for(e=t.length;i<e&&this.isOnlyWhiteSpace(t[i]);){t=this.replaceCharAt(t,e," ");i++}}return this.trim(t)},isOnlyWhiteSpace:function(t){return!/[^\t\n\r ]/.test(t)},collapseWhiteSpace:function(t){return t.replace(/[\t\n\r ]+/g," ")},hasProperties:function(t){var e;for(e in t)if(t.hasOwnProperty(e))return!0;return!1},sortObjects:function(t,e){return e=e?-1:1,function(i,s){return i=i[t],s=s[t],i<s?e*-1:i>s?e*1:0}}},r.domUtils={document:null,rootNode:null,getDOMParser:function(){if(typeof DOMParser===void 0)try{return Components.classes["@mozilla.org/xmlextras/domparser;1"].createInstance(Components.interfaces.nsIDOMParser)}catch{return}else return new DOMParser},getDOMContext:function(t){if(t.node&&(this.rootNode=t.node),t.html){var e=this.getDOMParser();this.rootNode=e.parseFromString(t.html,"text/html")}return this.rootNode!==null&&(this.rootNode.nodeType===9?(this.document=this.rootNode,this.rootNode=r.domUtils.querySelector(this.rootNode,"html")):this.document=r.domUtils.ownerDocument(this.rootNode)),!this.rootNode&&document&&(this.rootNode=r.domUtils.querySelector(document,"html"),this.document=document),this.rootNode&&this.document?{document:this.document,rootNode:this.rootNode}:{document:null,rootNode:null}},getTopMostNode:function(t){return t},ownerDocument:function(t){return t.ownerDocument},textContent:function(t){return t.textContent?t.textContent:t.innerText?t.innerText:""},innerHTML:function(t){return t.innerHTML},hasAttribute:function(t,e){return t.hasAttribute?t.hasAttribute(e):!1},hasAttributeValue:function(t,e,i){return this.getAttributeList(t,e).indexOf(i)>-1},getAttribute:function(t,e){return t.getAttribute(e)},setAttribute:function(t,e,i){t.setAttribute(e,i)},removeAttribute:function(t,e){t.removeAttribute(e)},getElementById:function(t,e){return t.querySelector("#"+e)},querySelector:function(t,e){return t.querySelector(e)},getAttributeList:function(t,e){var i=[],s;return s=t.getAttribute(e),s&&s!==""&&(s.indexOf(" ")>-1?i=s.split(" "):i.push(s)),i},getNodesByAttribute:function(t,e){var i="["+e+"]";return t.querySelectorAll(i)},getNodesByAttributeValue:function(t,e,i){var s=[],n=0,o,a=[];if(s=this.getNodesByAttribute(t,e),s)for(o=s.length;n<o;)this.hasAttributeValue(s[n],e,i)&&a.push(s[n]),n++;return a},getAttrValFromTagList:function(t,e,i){for(var s=e.length;s--;)if(t.tagName.toLowerCase()===e[s]){var n=this.getAttribute(t,i);if(n&&n!=="")return n}return null},getSingleDescendant:function(t){return this.getDescendant(t,null,!1)},getSingleDescendantOfType:function(t,e){return this.getDescendant(t,e,!0)},getDescendant:function(t,e,i){for(var s=t.children.length,n=0,o=0,a,l=null;s--;)a=t.children[s],a.nodeType===1&&(e?this.hasTagName(a,e)&&(l=a,o++):(l=a,n++));return i===!0?o===1?l:null:n===1?l:null},hasTagName:function(t,e){for(var i=e.length;i--;)if(t.tagName.toLowerCase()===e[i])return!0;return!1},appendChild:function(t,e){return t.appendChild(e)},removeChild:function(t){return t.parentNode?t.parentNode.removeChild(t):null},clone:function(t){var e=t.cloneNode(!0);return this.hasAttribute(t,"id")&&this.removeAttribute(t,"id"),e},removeDescendantsByTagName:function(t,e){for(var i=0;i<e.length;i++)if(t.getElementsByTagName)for(var s=t.getElementsByTagName(e[i]);s[0];)s[0].parentNode.removeChild(s[0]);return t},getElementText:function(t){return t&&t.data?t.data:""},getOrderedAttributes:function(t){for(var e=t.outerHTML,i=[],s=0;s<t.attributes.length;s++){var n=t.attributes[s];n.indexNum=e.indexOf(n.name),i.push(n)}return i.sort(r.utils.sortObjects("indexNum"))},decodeEntities:function(t,e){return t.createTextNode(e).nodeValue},cloneDocument:function(t){var e,i=null;return this.canCloneDocument(t)&&(i=t.implementation.createHTMLDocument(""),e=i.importNode(t.documentElement,!0),i.replaceChild(e,i.querySelector("html"))),e&&e.nodeType&&e.nodeType===1?i:t},canCloneDocument:function(t){return t&&t.importNode&&t.implementation&&t.implementation.createHTMLDocument},getChildIndex:function(t){for(var e=t.parentNode,i=-1,s;e&&(s=e.childNodes[++i]);)if(s===t)return i;return-1},getNodePath:function(t){var e=t.parentNode,i=[],s=this.getChildIndex(t);return e&&(i=this.getNodePath(e))&&s>-1&&i.push(s),i},getFirstAncestorAttribute:function(t,e){if(!t)return null;if(this.hasAttribute(t,e))return this.getAttribute(t,e);var i=t.parentNode;return i?this.getFirstAncestorAttribute(i,e):null},getNodeByPath:function(t,e){for(var i=t.documentElement,s=0,n;(n=e[++s])>-1;)i=i.childNodes[n];return i},getChildren:function(t){return t.children},createNode:function(t){return this.document.createElement(t)},createNodeWithText:function(t,e){var i=this.document.createElement(t);return i.innerHTML=e,i}},r.url={init:function(){this._domParser=r.domUtils.getDOMParser(),this._html='<base id="base" href=""></base><a id="link" href=""></a>',this._nodes=this._domParser.parseFromString(this._html,"text/html"),this._baseNode=r.domUtils.getElementById(this._nodes,"base"),this._linkNode=r.domUtils.getElementById(this._nodes,"link")},resolve:function(t,e){if(r.utils.isString(t)&&r.utils.isString(e)&&t.indexOf("://")===-1)try{var i=new URL(t,e).toString();return i==="[object URL]"&&(i=URI.resolve(e,t)),i}catch{return this._domParser===void 0&&this.init(),this._baseNode.href=e,this._linkNode.href=t,this._linkNode.href}else return r.utils.isString(t)?t:""}},r.ISODate=function(t,e){this.clear(),this.format=e||"auto",this.setFormatSep(),arguments[0]&&this.parse(t,this.format)},r.ISODate.prototype={clear:function(){this.clearDate(),this.clearTime(),this.clearTimeZone(),this.setAutoProfileState()},clearDate:function(){this.dY=-1,this.dM=-1,this.dD=-1,this.dDDD=-1},clearTime:function(){this.tH=-1,this.tM=-1,this.tS=-1,this.tD=-1},clearTimeZone:function(){this.tzH=-1,this.tzM=-1,this.tzPN="+",this.z=!1},setAutoProfileState:function(){this.autoProfile={sep:"T",dsep:"-",tsep:":",tzsep:":",tzZulu:"Z"}},parse:function(t,e){this.clear(),this.setFormat(e);var i=[],s=[],n=0,o="",a="",l="";return t.indexOf("t")>-1&&(this.autoProfile.sep="t"),t.indexOf("z")>-1&&(this.autoProfile.tzZulu="z"),t.indexOf("Z")>-1&&(this.autoProfile.tzZulu="Z"),t.toUpperCase().indexOf("T")===-1&&(this.autoProfile.sep=" "),t=t.toUpperCase().replace(" ","T"),t.indexOf("T")>-1?(i=t.split("T"),o=i[0],a=i[1],a.indexOf("Z")>-1&&(this.z=!0),(a.indexOf("+")>-1||a.indexOf("-")>-1)&&(s=a.split("Z"),a=s[0],l=s[1],(a.indexOf("+")>-1||a.indexOf("-")>-1)&&(n=0,a.indexOf("+")>-1?n=a.indexOf("+"):n=a.indexOf("-"),l=a.substring(n,a.length),a=a.substring(0,n)))):o=t,o!==""&&(this.parseDate(o),a!==""&&(this.parseTime(a),l!==""&&this.parseTimeZone(l))),this.toString(this.format)},parseDate:function(t,e){this.setFormat(e),this.clearDate();var i=[];return t.indexOf("-")===-1&&(this.autoProfile.tsep=""),i=t.match(/(\d\d\d\d)-(\d\d\d)/),i&&(i[1]&&(this.dY=i[1]),i[2]&&(this.dDDD=i[2])),this.dDDD===-1&&(i=t.match(/(\d\d\d\d)?-?(\d\d)?-?(\d\d)?/),i[1]&&(this.dY=i[1]),i[2]&&(this.dM=i[2]),i[3]&&(this.dD=i[3])),this.toString(this.format)},parseTime:function(t,e){this.setFormat(e),this.clearTime();var i=[];return t.indexOf(":")===-1&&(this.autoProfile.tsep=""),i=t.match(/(\d\d)?:?(\d\d)?:?(\d\d)?.?([0-9]+)?/),i[1]&&(this.tH=i[1]),i[2]&&(this.tM=i[2]),i[3]&&(this.tS=i[3]),i[4]&&(this.tD=i[4]),this.toTimeString(this.format)},parseTimeZone:function(t,e){this.setFormat(e),this.clearTimeZone();var i=[];return t.toLowerCase()==="z"?(this.z=!0,this.autoProfile.tzZulu=t==="z"?"z":"Z"):(t.indexOf(":")===-1&&(this.autoProfile.tzsep=""),i=t.match(/([\-\+]{1})?(\d\d)?:?(\d\d)?/),i[1]&&(this.tzPN=i[1]),i[2]&&(this.tzH=i[2]),i[3]&&(this.tzM=i[3])),this.tzZulu="z",this.toTimeString(this.format)},toString:function(t){this.setFormat(t);var e="";return this.dY>-1?(e=this.dY,this.dM>0&&this.dM<13&&(e+=this.dsep+this.dM,this.dD>0&&this.dD<32&&(e+=this.dsep+this.dD,this.tH>-1&&this.tH<25&&(e+=this.sep+this.toTimeString(this.format)))),this.dDDD>-1&&(e+=this.dsep+this.dDDD)):this.tH>-1&&(e+=this.toTimeString(this.format)),e},toTimeString:function(t){this.setFormat(t);var e="";return this.tH&&this.tH>-1&&this.tH<25&&(e+=this.tH,this.tM>-1&&this.tM<61&&(e+=this.tsep+this.tM,this.tS>-1&&this.tS<61&&(e+=this.tsep+this.tS,this.tD>-1&&(e+="."+this.tD))),this.z?e+=this.tzZulu:this.tzH&&this.tzH>-1&&this.tzH<25&&(e+=this.tzPN+this.tzH,this.tzM>-1&&this.tzM<61&&(e+=this.tzsep+this.tzM))),e},setFormat:function(t){t&&(this.format=t),this.setFormatSep()},setFormatSep:function(){switch(this.format.toLowerCase()){case"microformat2":this.sep=" ",this.dsep="-",this.tsep=":",this.tzsep="",this.tzZulu="Z";break;case"rfc3339":this.sep="T",this.dsep="",this.tsep="",this.tzsep="",this.tzZulu="Z";break;case"w3c":this.sep="T",this.dsep="-",this.tsep=":",this.tzsep=":",this.tzZulu="Z";break;case"html5":this.sep=" ",this.dsep="-",this.tsep=":",this.tzsep=":",this.tzZulu="Z";break;default:this.sep=this.autoProfile.sep,this.dsep=this.autoProfile.dsep,this.tsep=this.autoProfile.tsep,this.tzsep=this.autoProfile.tzsep,this.tzZulu=this.autoProfile.tzZulu}},hasFullDate:function(){return this.dY!==-1&&this.dM!==-1&&this.dD!==-1},hasDate:function(){return this.dY!==-1},hasTime:function(){return this.tH!==-1},hasTimeZone:function(){return this.tzH!==-1}},r.ISODate.prototype.constructor=r.ISODate,r.dates={hasAM:function(t){return t=t.toLowerCase(),t.indexOf("am")>-1||t.indexOf("a.m.")>-1},hasPM:function(t){return t=t.toLowerCase(),t.indexOf("pm")>-1||t.indexOf("p.m.")>-1},removeAMPM:function(t){return t.replace("pm","").replace("p.m.","").replace("am","").replace("a.m.","")},isDuration:function(t){return!!(r.utils.isString(t)&&(t=t.toLowerCase(),r.utils.startWith(t,"p")))},isTime:function(t){return!!(r.utils.isString(t)&&(t=t.toLowerCase(),t=r.utils.trim(t),t.match(":")&&(r.utils.startWith(t,"z")||r.utils.startWith(t,"-")||r.utils.startWith(t,"+"))||t.match(/^[0-9]/)&&(this.hasAM(t)||this.hasPM(t))||t.match(":")&&!t.match(/t|\s/)||r.utils.isNumber(t)&&(t.length===2||t.length===4||t.length===6)))},parseAmPmTime:function(t){var e=t,i=[];return r.utils.isString(e)&&(t=t.replace(/[ ]+/g,""),(t.match(":")||this.hasAM(t)||this.hasPM(t))&&(t.match(":")?i=t.split(":"):(i[0]=t,i[0]=this.removeAMPM(i[0])),this.hasPM(t)&&i[0]<12&&(i[0]=parseInt(i[0],10)+12),i[0]&&i[0].length===1&&(i[0]="0"+i[0]),i[0]&&(t=i.join(":")))),this.removeAMPM(t)},dateTimeUnion:function(t,e,i){var s=new r.ISODate(t,i),n=new r.ISODate;return n.parseTime(this.parseAmPmTime(e),i),s.hasFullDate()&&n.hasTime()?(s.tH=n.tH,s.tM=n.tM,s.tS=n.tS,s.tD=n.tD,s):s.hasFullDate()?s:new r.ISODate},concatFragments:function(t,e){var i=new r.ISODate,s=0,n="";if(t[0].toUpperCase().match("T"))return new r.ISODate(t[0],e);for(s=0;s<t.length;s++){if(n=t[s],n.charAt(4)==="-"&&i.hasFullDate()===!1&&i.parseDate(n),(n.indexOf(":")>-1||r.utils.isNumber(this.parseAmPmTime(n)))&&i.hasTime()===!1){var o=this.splitTimeAndZone(n);n=o[0],n=this.parseAmPmTime(n),i.parseTime(n),o.length>1&&i.parseTimeZone(o[1],e)}(n.charAt(0)==="-"||n.charAt(0)==="+"||n.toUpperCase()==="Z")&&i.hasTimeZone()===!1&&i.parseTimeZone(n)}return i.tM===-1&&(i.tM="00"),i},splitTimeAndZone:function(t){for(var e=[t],i=["-","+","z","Z"],s=i.length;s--;)if(t.indexOf(i[s])>-1){e[0]=t.slice(0,t.indexOf(i[s])),e.push(t.slice(t.indexOf(i[s])));break}return e}},r.text={textFormat:"whitespacetrimmed",blockLevelTags:["h1","h2","h3","h4","h5","h6","p","hr","pre","table","address","article","aside","blockquote","caption","col","colgroup","dd","div","dt","dir","fieldset","figcaption","figure","footer","form","header","hgroup","hr","li","map","menu","nav","optgroup","option","section","tbody","testarea","tfoot","th","thead","tr","td","ul","ol","dl","details"],excludeTags:["noframe","noscript","template","script","style","frames","frameset"],parse:function(t,e,i){var s;if(this.textFormat=i||this.textFormat,this.textFormat==="normalised")return s=this.walkTreeForText(e),s!==void 0?this.normalise(t,s):"";var n=r.domUtils.clone(e),o=r.domUtils.removeDescendantsByTagName(n,this.excludeTags);return this.formatText(t,r.domUtils.textContent(o),this.textFormat)},parseText:function(t,e,i){var s=r.domUtils.createNodeWithText("div",e);return this.parse(t,s,i)},formatText:function(t,e,i){if(this.textFormat=i||this.textFormat,e){var s=e;return this.textFormat==="whitespacetrimmed"&&(s=r.utils.trimWhitespace(s)),s}else return""},normalise:function(t,e){return e=e.replace(/&nbsp;/g," "),e=r.utils.collapseWhiteSpace(e),e=r.domUtils.decodeEntities(t,e),e=e.replace("\u2013","-"),r.utils.trim(e)},walkTreeForText:function(t){var e="",i=0;if(t.tagName&&this.excludeTags.indexOf(t.tagName.toLowerCase())>-1)return e;if(t.nodeType&&t.nodeType===3&&(e+=r.domUtils.getElementText(t)),t.childNodes&&t.childNodes.length>0)for(i=0;i<t.childNodes.length;i++){var s=this.walkTreeForText(t.childNodes[i]);s!==void 0&&(e+=s)}return t.tagName&&this.blockLevelTags.indexOf(t.tagName.toLowerCase())!==-1&&(e+=" "),e===""?void 0:e}},r.html={selfClosingElt:["area","base","br","col","hr","img","input","link","meta","param","command","keygen","source"],parse:function(t){var e="",i=0;if(t.childNodes&&t.childNodes.length>0)for(i=0;i<t.childNodes.length;i++){var s=this.walkTreeForHtml(t.childNodes[i]);s!==void 0&&(e+=s)}return e},walkTreeForHtml:function(t){var e="",i=0;if(t.nodeType&&t.nodeType===3){var s=r.domUtils.createNode("div");r.domUtils.appendChild(s,r.domUtils.clone(t)),e+=r.domUtils.innerHTML(s)}if(t.nodeType&&t.nodeType===1&&r.domUtils.hasAttribute(t,"data-include")===!1){e+="<"+t.tagName.toLowerCase();var n=r.domUtils.getOrderedAttributes(t);for(i=0;i<n.length;i++)e+=" "+n[i].name+'="'+n[i].value+'"';if(this.selfClosingElt.indexOf(t.tagName.toLowerCase())===-1&&(e+=">"),t.childNodes&&t.childNodes.length>0)for(i=0;i<t.childNodes.length;i++){var o=this.walkTreeForHtml(t.childNodes[i]);o!==void 0&&(e+=o)}this.selfClosingElt.indexOf(t.tagName.toLowerCase())>-1?e+=" />":e+="</"+t.tagName.toLowerCase()+">"}return e===""?void 0:e}},r.maps["h-adr"]={root:"adr",name:"h-adr",properties:{"post-office-box":{},"street-address":{},"extended-address":{},locality:{},region:{},"postal-code":{},"country-name":{}}},r.maps["h-card"]={root:"vcard",name:"h-card",properties:{fn:{map:"p-name"},adr:{map:"p-adr",uf:["h-adr"]},agent:{uf:["h-card"]},bday:{map:"dt-bday"},class:{},category:{map:"p-category",relAlt:["tag"]},email:{map:"u-email"},geo:{map:"p-geo",uf:["h-geo"]},key:{map:"u-key"},label:{},logo:{map:"u-logo"},mailer:{},"honorific-prefix":{},"given-name":{},"additional-name":{},"family-name":{},"honorific-suffix":{},nickname:{},note:{},org:{},"p-organization-name":{},"p-organization-unit":{},photo:{map:"u-photo"},rev:{map:"dt-rev"},role:{},sequence:{},"sort-string":{},sound:{map:"u-sound"},title:{map:"p-job-title"},tel:{},tz:{},uid:{map:"u-uid"},url:{map:"u-url"}}},r.maps["h-entry"]={root:"hentry",name:"h-entry",properties:{"entry-title":{map:"p-name"},"entry-summary":{map:"p-summary"},"entry-content":{map:"e-content"},published:{map:"dt-published"},updated:{map:"dt-updated"},author:{uf:["h-card"]},category:{map:"p-category",relAlt:["tag"]},geo:{map:"p-geo",uf:["h-geo"]},latitude:{},longitude:{},url:{map:"u-url",relAlt:["bookmark"]}}},r.maps["h-event"]={root:"vevent",name:"h-event",properties:{summary:{map:"p-name"},dtstart:{map:"dt-start"},dtend:{map:"dt-end"},description:{},url:{map:"u-url"},category:{map:"p-category",relAlt:["tag"]},location:{uf:["h-card"]},geo:{uf:["h-geo"]},latitude:{},longitude:{},duration:{map:"dt-duration"},contact:{uf:["h-card"]},organizer:{uf:["h-card"]},attendee:{uf:["h-card"]},uid:{map:"u-uid"},attach:{map:"u-attach"},status:{},rdate:{},rrule:{}}},r.maps["h-feed"]={root:"hfeed",name:"h-feed",properties:{category:{map:"p-category",relAlt:["tag"]},summary:{map:"p-summary"},author:{uf:["h-card"]},url:{map:"u-url"},photo:{map:"u-photo"}}},r.maps["h-geo"]={root:"geo",name:"h-geo",properties:{latitude:{},longitude:{}}},r.maps["h-item"]={root:"item",name:"h-item",subTree:!1,properties:{fn:{map:"p-name"},url:{map:"u-url"},photo:{map:"u-photo"}}},r.maps["h-listing"]={root:"hlisting",name:"h-listing",properties:{version:{},lister:{uf:["h-card"]},dtlisted:{map:"dt-listed"},dtexpired:{map:"dt-expired"},location:{},price:{},item:{uf:["h-card","a-adr","h-geo"]},summary:{map:"p-name"},description:{map:"e-description"},listing:{}}},r.maps["h-news"]={root:"hnews",name:"h-news",properties:{entry:{uf:["h-entry"]},geo:{uf:["h-geo"]},latitude:{},longitude:{},"source-org":{uf:["h-card"]},dateline:{uf:["h-card"]},"item-license":{map:"u-item-license"},principles:{map:"u-principles",relAlt:["principles"]}}},r.maps["h-org"]={root:"h-x-org",name:"h-org",childStructure:!0,properties:{"organization-name":{},"organization-unit":{}}},r.maps["h-product"]={root:"hproduct",name:"h-product",properties:{brand:{uf:["h-card"]},category:{map:"p-category",relAlt:["tag"]},price:{},description:{map:"e-description"},fn:{map:"p-name"},photo:{map:"u-photo"},url:{map:"u-url"},review:{uf:["h-review","h-review-aggregate"]},listing:{uf:["h-listing"]},identifier:{map:"u-identifier"}}},r.maps["h-recipe"]={root:"hrecipe",name:"h-recipe",properties:{fn:{map:"p-name"},ingredient:{map:"e-ingredient"},yield:{},instructions:{map:"e-instructions"},duration:{map:"dt-duration"},photo:{map:"u-photo"},summary:{},author:{uf:["h-card"]},published:{map:"dt-published"},nutrition:{},category:{map:"p-category",relAlt:["tag"]}}},r.maps["h-resume"]={root:"hresume",name:"h-resume",properties:{summary:{},contact:{uf:["h-card"]},education:{uf:["h-card","h-event"]},experience:{uf:["h-card","h-event"]},skill:{},affiliation:{uf:["h-card"]}}},r.maps["h-review-aggregate"]={root:"hreview-aggregate",name:"h-review-aggregate",properties:{summary:{map:"p-name"},item:{map:"p-item",uf:["h-item","h-geo","h-adr","h-card","h-event","h-product"]},rating:{},average:{},best:{},worst:{},count:{},votes:{},category:{map:"p-category",relAlt:["tag"]},url:{map:"u-url",relAlt:["self","bookmark"]}}},r.maps["h-review"]={root:"hreview",name:"h-review",properties:{summary:{map:"p-name"},description:{map:"e-description"},item:{map:"p-item",uf:["h-item","h-geo","h-adr","h-card","h-event","h-product"]},reviewer:{uf:["h-card"]},dtreviewer:{map:"dt-reviewer"},rating:{},best:{},worst:{},category:{map:"p-category",relAlt:["tag"]},url:{map:"u-url",relAlt:["self","bookmark"]}}},r.rels={friend:["yes","external"],acquaintance:["yes","external"],contact:["yes","external"],met:["yes","external"],"co-worker":["yes","external"],colleague:["yes","external"],"co-resident":["yes","external"],neighbor:["yes","external"],child:["yes","external"],parent:["yes","external"],sibling:["yes","external"],spouse:["yes","external"],kin:["yes","external"],muse:["yes","external"],crush:["yes","external"],date:["yes","external"],sweetheart:["yes","external"],me:["yes","external"],license:["yes","yes"],nofollow:["no","external"],tag:["no","yes"],self:["no","external"],bookmark:["no","external"],author:["no","external"],home:["no","external"],directory:["no","external"],enclosure:["no","external"],pronunciation:["no","external"],payment:["no","external"],principles:["no","external"]};var m={version:r.version,livingStandard:r.livingStandard};m.get=function(t){var e=new r.Parser;return b(e,t),e.get(t)},m.getParent=function(t,e){var i=new r.Parser;return b(i,e),i.getParent(t,e)},m.count=function(t){var e=new r.Parser;return b(e,t),e.count(t)},m.isMicroformat=function(t,e){var i=new r.Parser;return b(i,e),i.isMicroformat(t,e)},m.hasMicroformats=function(t,e){var i=new r.Parser;return b(i,e),i.hasMicroformats(t,e)};function b(t,e){e&&e.maps&&(Array.isArray(e.maps)?t.add(e.maps):t.add([e.maps]))}return m}),function(r){var m,b,t,e,i;if(!!r){try{t=!!new r().parseFromString("","text/html")}catch{t=!1}if(!t){try{var s=document.implementation.createHTMLDocument("");s.documentElement.innerHTML="<title></title><div></div>",i=!0}catch{i=!1}if(!i)try{e=!!new r().parseFromString("","text/xml")}catch{t=!1}r.prototype&&(i||e)&&(m=r.prototype,b=m.parseFromString,m.parseFromString=function(n,o){if(/^\s*text\/html\s*(?:;|$)/i.test(o)){var a,l,u;return i?(a=document.implementation.createHTMLDocument(""),l=a.documentElement,l.innerHTML=n,u=l.firstElementChild):e&&(/^<html.*html>$/i.test(n)||(n="<html>"+n+"</html>"),a=new r().parseFromString(n,"text/xml"),l=a.documentElement,u=l.firstElementChild),l.childElementCount===1&&u.localName.toLowerCase()==="html"&&a.replaceChild(u,l),a}else return b.apply(this,arguments)})}}}(DOMParser)})(O);const S=O.exports;function V(c,h){return Array.isArray(h)||(h=[h]),L(c,r=>{for(let m of h)if(r.classList.contains(m))return!0;return!1})}function L(c,h){for(;!h(c)&&c.tagName!="BODY";)c=c.parentElement;return h(c)?c:null}const C="__omnibear-selected-item";let T;function F(){T&&(P.runtime.sendMessage({action:"clear-entry"}),I())}function I(){T&&(T.element.classList.remove(C),T=null)}function E(c){F();let h;document.location.hostname==="twitter.com"?h=z(c.target):document.location.hostname==="www.facebook.com"?h=R(c.target):h=M(c.target),h&&(P.runtime.sendMessage({action:"select-entry",payload:{type:"item",url:h.url,title:h.title||""}}),h.element.classList.add(C),T=h)}function z(c){const h=V(c,"tweet");if(!h)return!1;const r=`https://twitter.com${h.getAttribute("data-permalink-path")}`,m=h.getAttribute("data-name");return{element:h,type:"entry",url:r,title:`Tweet by ${m}`}}function R(c){const h=L(c,m=>m.id.startsWith("hyperfeed_story_id_"));if(!h)return!1;let r=h.getElementsByClassName("timestampContent");if(r&&r[0]){for(r=r[0];r.tagName!="A"&&r.tagName!="BODY";)r=r.parentElement;const m=r.href;if(m)return{element:h,type:"entry",url:m,title:"Facebook post"}}return!1}function M(c){const h=V(c,"h-entry");if(!h)return!1;const r=S.get({node:h});let m,b="";return r.items.length&&r.items[0].properties&&r.items[0].properties.url&&(m=r.items[0].properties.url[0],r.items[0].properties.name&&(b=r.items[0].properties.name[0]||"")),m?typeof m!="string"?!1:{element:h,url:m,title:b}:h.tagName==="BODY"?!1:M(h.parentElement)}function H(){return T}(function(){document.body.addEventListener("click",F),document.body.addEventListener("contextmenu",E);function c(e){switch(e.action){case"fetch-token-error":h(e.payload.error);break;case"auth-status-update":m(e.payload);break}}P.runtime.onMessage.addListener(c);function h(e){if(!r)return;const i=document.getElementById("status-heading"),s=document.getElementById("status-paragraph");i.textContent="Error fetching token from token endpoint",s.textContent=e.message}function r(){const e=document.location;return e.hostname==="omnibear.com"&&e.pathname==="/auth/success/"}function m(e){const{message:i,isError:s}=e,n=document.getElementById("status-list");if(!n)return;const o=document.createElement("li");o.innerText=i,s&&o.classList.add("is-error"),n.appendChild(o)}document.hidden||b(),window.addEventListener("focus",b);function b(){const e=t(),i={type:"page",url:D(document.location.href),title:document.title,webmention:e},s=H();let n=null;s&&(n={type:"item",url:D(s.url),title:s.title,webmention:e}),P.runtime.sendMessage({action:"focus-window",payload:{pageEntry:i,selectedEntry:n}})}function t(){return!!document.querySelector('link[rel="webmention"]')}if(r()){const e=document.getElementById("status-paragraph");e&&e.parentElement.removeChild(e)}})();
